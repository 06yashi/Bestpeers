c
n
 refund.status == 'succeeded'
if refund.status == 'succeeded'
n
payment_intent
n
c
n
payment_intent
n
c
n
checkout_session.payment_intent
n
Stripe::Checkout::Session.retrieve(stripe_charge_id)
n
@booking.stripe_charge_id
c
@booking
@boking
 @booking.update!(stripe_charge_id: session.id)
n
c
@booking.update!(stripe_charge_id: session.id)
n
c
n
@booking
n
session
n
c
@booking
@booking.stripe_charge_id
c
stripe_charge_id
c
payment_intent_id
c
payment_intent_id
@booking
c
if charge && charge.charges.data.any?
charge
payment_intent_id
c
payment_intent_id
c
session.payment_intent
c
charge = Stripe::PaymentIntent.retrieve(payment_intent_id)
session[:payment_intent]
payment_intent_id 
c
stripe_charge_id
c
payment_intent_id
c
@booking
c
payment_intent_id
c
params
response.body
n
c
n
c
n
c
n
Car.all
 @cars = Car.find_by(name: params[:query].capitalize)
n
params
n
c
n
car2
car
c
n
c
response.body
response
n
c
n
response.body
n
resonse
n
c
n
response.body
response
n
c
response.body
response
 expect(response)
n
c
 Car.find_by(name: params[:query].capitalize)
n
c
name.capitalize
name = "rohan"
rohan.capitalize
rohan.
rohan.capitalize
params[:query].capitalize
params[:query].capatialize
Car.find_by(name: params[:query])
@car
 @cars = Car.where("name ILIKE ?", "%#{params[:query]}%")
n
params
n
Car.all
n
c
n
c
n
c
n
